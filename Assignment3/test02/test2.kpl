PROGRAM AllTests;

(* ============================================ *)
(* TEST 1: BASIC DECLARATIONS *)
(* ============================================ *)

CONST
  MAX = 100;
  MIN = 0;
  PI = 3;

TYPE
  MyArray = ARRAY (.10.) OF INTEGER;
  SmallArray = ARRAY (.5.) OF INTEGER;

VAR
  a : INTEGER;
  b : INTEGER;
  c : INTEGER;
  x : INTEGER;
  y : INTEGER;
  z : INTEGER;
  counter : INTEGER;
  sum : INTEGER;
  arr : MyArray;
  smallArr : SmallArray;

(* ============================================ *)
(* TEST 2: PROCEDURE AND FUNCTION DECLARATIONS *)
(* ============================================ *)

PROCEDURE PrintValue(n : INTEGER);
BEGIN
  CALL WriteInt(n)
END;

FUNCTION Add(p1 : INTEGER; p2 : INTEGER) : INTEGER;
VAR
  result : INTEGER;
BEGIN
  result := p1 + p2
END;

(* ============================================ *)
(* MAIN PROGRAM *)
(* ============================================ *)

BEGIN
  (* ============================================ *)
  (* TEST 3: SIMPLE ASSIGNMENT *)
  (* ============================================ *)
  a := 10;
  b := 20;
  c := 30;

  (* ============================================ *)
  (* TEST 4: MULTIPLE VARIABLE ASSIGNMENT *)
  (* ============================================ *)

  (* Example 1: Simple multiple assignment *)
  x, y, z := 1, 2, 3;

  (* Example 2: Multiple assignment with expressions *)
  x, y, z := 1 + 2, 3 * 4, 5 - 1;

  (* Example 3: Multiple assignment with variables *)
  a := 100;
  b := 200;
  x, y := a, b;

  (* Example 4: Swap variables *)
  a := 5;
  b := 10;
  a, b := b, a;

  (* ============================================ *)
  (* TEST 5: ARRAY ASSIGNMENT *)
  (* ============================================ *)

  (* Single array element assignment *)
  arr(.0.) := 100;
  smallArr(.1.) := 50;

  (* Multiple array element assignment *)
  smallArr(.0.), smallArr(.1.), smallArr(.2.) := 1, 2, 3;

  (* Mixed assignment *)
  x, smallArr(.0.), y := 100, 200, 300;

  (* ============================================ *)
  (* TEST 6: IF-THEN-ELSE STATEMENT *)
  (* ============================================ *)

  x := 10;
  y := 20;

  IF x < y THEN
    z := x
  ELSE
    z := y;

  IF x = 10 THEN
    BEGIN
      y := x * 2;
      z := y + 1
    END;

  (* ============================================ *)
  (* TEST 7: WHILE-DO LOOP *)
  (* ============================================ *)

  counter := 0;
  WHILE counter < 10 DO
    counter := counter + 1;

  (* WHILE with compound statement *)
  sum := 0;
  counter := 1;
  WHILE counter <= 5 DO
    BEGIN
      sum := sum + counter;
      counter := counter + 1
    END;

  (* ============================================ *)
  (* TEST 8: FOR-TO-DO LOOP *)
  (* ============================================ *)

  FOR counter := 1 TO 10 DO
    CALL PrintValue(counter);

  (* FOR with compound statement *)
  sum := 0;
  FOR counter := 1 TO 5 DO
    BEGIN
      sum := sum + counter;
      arr(.counter.) := counter * 10
    END;

  (* ============================================ *)
  (* TEST 9: REPEAT-UNTIL LOOP *)
  (* ============================================ *)

  (* Example 1: Simple REPEAT-UNTIL *)
  x := 1;
  REPEAT
    x := x + 1
  UNTIL x > 10;

  (* Example 2: REPEAT with multiple statements *)
  sum := 0;
  x := 1;
  REPEAT
    sum := sum + x;
    x := x + 1
  UNTIL x > 5;

  (* Example 3: Nested REPEAT inside IF *)
  IF sum > 0 THEN
    REPEAT
      sum := sum - 1
    UNTIL sum = 0;

  (* Example 4: REPEAT with multiple variable assignment *)
  a := 1;
  b := 1;
  REPEAT
    a, b := a + 1, b + 2
  UNTIL a > 5;

  (* ============================================ *)
  (* TEST 10: COMPLEX EXPRESSIONS *)
  (* ============================================ *)

  x := (10 + 20) * (30 - 5);
  y := -x + 100;
  z := x / 2 - y * 3;

  (* Expression with array *)
  arr(.0.) := (arr(.1.) + arr(.2.)) * 2;

  (* ============================================ *)
  (* TEST 11: CALL STATEMENTS *)
  (* ============================================ *)

  CALL PrintValue(x);
  CALL PrintValue(100);

  (* ============================================ *)
  (* TEST 12: NESTED STRUCTURES *)
  (* ============================================ *)

  (* Nested IF-THEN-ELSE with REPEAT *)
  IF x > 0 THEN
    BEGIN
      y := x * 2;
      z := y + 1;
      REPEAT
        z := z - 1
      UNTIL z = 0
    END
  ELSE
    BEGIN
      y := 0;
      z := 0
    END;

  (* FOR loop with IF inside *)
  FOR counter := 1 TO 10 DO
    IF counter < 5 THEN
      arr(.counter.) := counter
    ELSE
      arr(.counter.) := counter * 2;

  (* WHILE with REPEAT inside *)
  x := 1;
  WHILE x < 3 DO
    BEGIN
      y := 1;
      REPEAT
        y := y + 1
      UNTIL y > 5;
      x := x + 1
    END;

  (* ============================================ *)
  (* TEST 13: COMPARISON OPERATORS *)
  (* ============================================ *)

  IF x = 10 THEN
    y := 1;

  IF x != 10 THEN
    y := 2;

  IF x < 10 THEN
    y := 3;

  IF x <= 10 THEN
    y := 4;

  IF x > 10 THEN
    y := 5;

  IF x >= 10 THEN
    y := 6;

  (* ============================================ *)
  (* TEST 14: FINAL MULTIPLE ASSIGNMENT TEST *)
  (* ============================================ *)

  (* Assign all results *)
  a, b, c := 100, 200, 300;
  x, y, z := a + b, b * 2, c - 50;

  (* Mixed array and variable assignment *)
  arr(.0.), x, arr(.1.), y := 10, 20, 30, 40

END.
